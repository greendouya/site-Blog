{"posts": [{"title": "psutil", "date": "2020-05-13T12:00:00-00.00", "path": "https://blog.wooocloud.com/archives/psutil/", "text": "psutil\n\nCPU\u76f8\u5173\n\n\n\u51fd\u6570\n\u63cf\u8ff0\n\n\n\n\npsutil.cpu_count()\ncpu_count(,[logical]):\u9ed8\u8ba4\u8fd4\u56de\u903b\u8f91CPU\u7684\u4e2a\u6570,\u5f53\u8bbe\u7f6elogical\u7684\u53c2\u6570\u4e3aFalse\u65f6\uff0c\u8fd4\u56de\u7269\u7406CPU\u7684\u4e2a\u6570\n\n\npsutil.cpu_percent()\ncpu_percent(,[percpu],[interval])\uff1a\u8fd4\u56deCPU\u7684\u5229\u7528\u7387,percpu\u4e3aTrue\u65f6\u663e\u793a\u6240\u6709\u7269\u7406\u6838\u5fc3\u7684\u5229\u7528\u7387,interval\u4e0d\u4e3a0\u65f6,\u5219\u963b\u585e\u65f6\u663e\u793ainterval\u6267\u884c\u7684\u65f6\u95f4\u5185\u7684\u5e73\u5747\u5229\u7528\u7387\n\n\npsutil.cpu_times()\ncpu_times(,[percpu])\uff1a\u4ee5\u547d\u540d\u5143\u7ec4(namedtuple)\u7684\u5f62\u5f0f\u8fd4\u56decpu\u7684\u65f6\u95f4\u82b1\u8d39,percpu=True\u8868\u793a\u83b7\u53d6\u6bcf\u4e2aCPU\u7684\u65f6\u95f4\u82b1\u8d39\n\n\npsutil.cpu_times_percent()\ncpu_times_percent(,[percpu])\uff1a\u529f\u80fd\u548ccpu_times\u5927\u81f4\u76f8\u540c\uff0c\u770b\u5b57\u9762\u610f\u601d\u5c31\u80fd\u77e5\u9053\uff0c\u8be5\u51fd\u6570\u8fd4\u56de\u7684\u662f\u8017\u65f6\u6bd4\u4f8b\n\n\npsutil.cpu_stats()\ncpu_stats()\u4ee5\u547d\u540d\u5143\u7ec4\u7684\u5f62\u5f0f\u8fd4\u56deCPU\u7684\u7edf\u8ba1\u4fe1\u606f\uff0c\u5305\u62ec\u4e0a\u4e0b\u6587\u5207\u6362\uff0c\u4e2d\u65ad\uff0c\u8f6f\u4e2d\u65ad\u548c\u7cfb\u7edf\u8c03\u7528\u6b21\u6570\n\n\npsutil.cpu_freq()\ncpu_freq([percpu])\uff1a\u8fd4\u56decpu\u9891\u7387\n\n\n\n\u793a\u4f8b\n# \u67e5\u770bcpu\u4e2a\u6570\n&gt;&gt;&gt; import psutil\n&gt;&gt;&gt; psutil.cpu_count()\n2\n&gt;&gt;&gt; psutil.cpu_count(logical=False)\n1\n&gt;&gt;&gt; \n# \u67e5\u770bcpu\u5229\u7528\u7387\n&gt;&gt;&gt; psutil.cpu_percent()\n0.2\n&gt;&gt;&gt; psutil.cpu_percent(percpu=True)\n[0.1, 0.2]\n&gt;&gt;&gt; \n# \u67e5\u770bcpu\u65f6\u95f4\u82b1\u8d39\n&gt;&gt;&gt; psutil.cpu_times()\nscputimes(user=29.09, nice=0.0, system=22.62, idle=24434.77, iowait=1.74, irq=0.0, softirq=0.28, steal=0.27, guest=0.0, guest_nice=0.0)\n&gt;&gt;&gt; psutil.cpu_times(percpu=True)\n[scputimes(user=13.64, nice=0.0, system=12.02, idle=12235.5, iowait=1.0, irq=0.0, softirq=0.16, steal=0.09, guest=0.0, guest_nice=0.0), \nscputimes(user=15.47, nice=0.0, system=10.62, idle=12229.44, iowait=0.74, irq=0.0, softirq=0.12, steal=0.17, guest=0.0, guest_nice=0.0)]\n&gt;&gt;&gt; print(cpu_time)\nscputimes(user=29.24, nice=0.0, system=22.76, idle=24618.94, iowait=1.74, irq=0.0, softirq=0.28, steal=0.27, guest=0.0, guest_nice=0.0)\n&gt;&gt;&gt; cpu_time.user\n29.24\n\nMemory\u5185\u5b58\u76f8\u5173\nvirtual_memory()\uff1a\u4ee5\u547d\u540d\u5143\u7ec4\u7684\u5f62\u5f0f\u8fd4\u56de\u5185\u5b58\u4f7f\u7528\u60c5\u51b5\uff0c\u5305\u62ec\u603b\u5185\u5b58\uff0c\u53ef\u7528\u5185\u5b58\uff0c\u5185\u5b58\u5229\u7528\u7387\uff0cbuffer\u548ccache\u7b49\u3002\u5355\u4f4d\u4e3a\u5b57\u8282\u3002\n&gt;&gt;&gt; import psutil\n&gt;&gt;&gt; psutil.virtual_memory()\nsvmem(total=8071716864, available=6532554752, percent=19.1, used=1258717184, free=6526308352, active=1153519616, inactive=194592768, buffers=2129920, cached=284561408, shared=9011200, slab=39006208)\n\nswap_memory()\uff1a\u4ee5\u547d\u540d\u5143\u7ec4\u7684\u5f62\u5f0f\u8fd4\u56deswap/memory\u4f7f\u7528\u60c5\u51b5\uff0c\u5305\u542bswap\u4e2d\u9875\u7684\u6362\u5165\u548c\u6362\u51fa\u3002\n&gt;&gt;&gt; import psutil\n&gt;&gt;&gt; psutil.swap_memory()\nsswap(total=17179865088, used=0, free=17179865088, percent=0.0, sin=0, sout=0)\n&gt;&gt;&gt;\n\n\u5355\u4f4d\u8f6c\u6362\nimport psutil\ndef bytes2human(n):\n     symbols = (&#39;K&#39;,&#39;M&#39;,&#39;G&#39;,&#39;T&#39;,&#39;P&#39;,&#39;E&#39;,&#39;Z&#39;,&#39;Y&#39;)\n     prefix = {}\n     for i,s in enumerate(symbols):\n         prefix[s] = 1 &lt;&lt; (i + 1) * 10\n     for s in reversed(symbols):\n         if n &gt;= prefix[s]:\n             value = float(n) / prefix[s]\n             return &#39;%.1f%s&#39; % (value,s)\n     return &#39;%sB&#39; % n\nprint(bytes2human(psutil.virtual_memory().total))\n\nDisk\u76f8\u5173\n\n\n\u51fd\u6570\n\u63cf\u8ff0\n\n\n\n\npsutil.disk_io_counters()\ndisk_io_counters([perdisk])\uff1a\u4ee5\u547d\u540d\u5143\u7ec4\u7684\u5f62\u5f0f\u8fd4\u56de\u78c1\u76d8io\u7edf\u8ba1\u4fe1\u606f(\u6c47\u603b\u7684)\uff0c\u5305\u62ec\u8bfb\u3001\u5199\u7684\u6b21\u6570\uff0c\u8bfb\u3001\u5199\u7684\u5b57\u8282\u6570\u7b49\u3002\u5f53perdisk\u7684\u503c\u4e3aTrue\uff0c\u5219\u5206\u522b\u5217\u51fa\u5355\u4e2a\u78c1\u76d8\u7684\u7edf\u8ba1\u4fe1\u606f(\u5b57\u5178\uff1akey\u4e3a\u78c1\u76d8\u540d\u79f0\uff0cvalue\u4e3a\u7edf\u8ba1\u7684namedtuple)\u3002\n\n\npsutil.disk_partitions()\ndisk_partitions([all=False])\uff1a\u4ee5\u547d\u540d\u5143\u7ec4\u7684\u5f62\u5f0f\u8fd4\u56de\u6240\u6709\u5df2\u6302\u8f7d\u7684\u78c1\u76d8\uff0c\u5305\u542b\u78c1\u76d8\u540d\u79f0\uff0c\u6302\u8f7d\u70b9\uff0c\u6587\u4ef6\u7cfb\u7edf\u7c7b\u578b\u7b49\u4fe1\u606f\u3002\u5f53all\u7b49\u4e8eTrue\u65f6\uff0c\u8fd4\u56de\u5305\u542b/proc\u7b49\u7279\u6b8a\u6587\u4ef6\u7cfb\u7edf\u7684\u6302\u8f7d\u4fe1\u606f\n\n\npsutil.disk_usage()\ndisk_usage(path)\uff1a\u4ee5\u547d\u540d\u5143\u7ec4\u7684\u5f62\u5f0f\u8fd4\u56depath\u6240\u5728\u78c1\u76d8\u7684\u4f7f\u7528\u60c5\u51b5\uff0c\u5305\u62ec\u78c1\u76d8\u7684\u5bb9\u91cf\u3001\u5df2\u7ecf\u4f7f\u7528\u7684\u78c1\u76d8\u5bb9\u91cf\u3001\u78c1\u76d8\u7684\u7a7a\u95f4\u5229\u7528\u7387\u7b49\u3002\n\n\n\n\u793a\u4f8b\n# \u67e5\u770b\u6240\u6709\u5df2\u6302\u8f7d\u7684\u78c1\u76d8\n&gt;&gt;&gt; psutil.disk_partitions()\n[sdiskpart(device=&#39;/dev/vda3&#39;, mountpoint=&#39;/&#39;, fstype=&#39;xfs&#39;, opts=&#39;rw,relatime,attr2,inode64,noquota&#39;), sdiskpart(device=&#39;/dev/vda6&#39;, mountpoint=&#39;/data1&#39;, fstype=&#39;xfs&#39;, opts=&#39;rw,relatime,attr2,inode64,noquota&#39;), sdiskpart(device=&#39;/dev/vda2&#39;, mountpoint=&#39;/boot&#39;, fstype=&#39;xfs&#39;, opts=&#39;rw,relatime,attr2,inode64,noquota&#39;)]\n# \u4f7f\u7528\u5217\u8868\u8868\u8fbe\u5f0f\u67e5\u8be2\u6307\u5b9a\u6302\u8f7d\u70b9\u4fe1\u606f\n&gt;&gt;&gt; [device for device in psutil.disk_partitions() if device.mountpoint == &#39;/&#39;]\n[sdiskpart(device=&#39;/dev/vda3&#39;, mountpoint=&#39;/&#39;, fstype=&#39;xfs&#39;, opts=&#39;rw,relatime,attr2,inode64,noquota&#39;)]\n&gt;&gt;&gt; \n# \u67e5\u770b\u78c1\u76d8\u4f7f\u7528\u60c5\u51b5\n&gt;&gt;&gt; psutil.disk_usage(&#39;/&#39;)\nsdiskusage(total=85857402880, used=3858100224, free=81999302656, percent=4.5)\n# \u67e5\u770b\u78c1\u76d8io\u7edf\u8ba1\u6c47\u603b\n&gt;&gt;&gt; psutil.disk_io_counters()\nsdiskio(read_count=6828, write_count=3878, read_bytes=273637888, write_bytes=30182912, read_time=6870, write_time=2079, read_merged_count=7, write_merged_count=126, busy_time=4841)\n# \u5206\u522b\u5217\u51fa\u5355\u4e2a\u78c1\u76d8\u7684\u7edf\u8ba1\u4fe1\u606f\n&gt;&gt;&gt; psutil.disk_io_counters(perdisk=True)\n{&#39;vda&#39;: sdiskio(read_count=6828, write_count=3878, read_bytes=273637888, write_bytes=30182912, read_time=6870, write_time=2079, read_merged_count=7, write_merged_count=126, busy_time=4841), &#39;vda1&#39;: sdiskio(read_count=34, write_count=0, read_bytes=139264, write_bytes=0, read_time=1, write_time=0, read_merged_count=0, write_merged_count=0, busy_time=1), &#39;vda2&#39;: sdiskio(read_count=1934, write_count=2049, read_bytes=22754816, write_bytes=2097152, read_time=570, write_time=801, read_merged_count=0, write_merged_count=0, busy_time=1347), &#39;vda3&#39;: sdiskio(read_count=4009, write_count=1729, read_bytes=187268608, write_bytes=12412416, read_time=5302, write_time=911, read_merged_count=4, write_merged_count=115, busy_time=3114), &#39;vda4&#39;: sdiskio(read_count=6, write_count=0, read_bytes=18432, write_bytes=0, read_time=1, write_time=0, read_merged_count=0, write_merged_count=0, busy_time=1), &#39;vda5&#39;: sdiskio(read_count=48, write_count=0, read_bytes=2248704, write_bytes=0, read_time=13, write_time=0, read_merged_count=0, write_merged_count=0, busy_time=9), &#39;vda6&#39;: sdiskio(read_count=763, write_count=100, read_bytes=60118528, write_bytes=15673344, read_time=948, write_time=367, read_merged_count=3, write_merged_count=11, busy_time=459), &#39;sr0&#39;: sdiskio(read_count=0, write_count=0, read_bytes=0, write_bytes=0, read_time=0, write_time=0, read_merged_count=0, write_merged_count=0, busy_time=0)}\n\nNetwork\u76f8\u5173\n\n\n\u51fd\u6570\n\u8be6\u60c5\n\n\n\n\npsutil.net_io_counter([pernic])\n\u4ee5\u547d\u540d\u5143\u7ec4\u7684\u5f62\u5f0f\u8fd4\u56de\u5f53\u524d\u7cfb\u7edf\u4e2d\u6bcf\u5757\u7f51\u5361\u7684\u7f51\u7edcio\u7edf\u8ba1\u4fe1\u606f\uff0c\u5305\u62ec\u6536\u53d1\u5b57\u8282\u6570\uff0c\u6536\u53d1\u5305\u7684\u6570\u91cf\u3001\u51fa\u9519\u7684\u60c5\u51b5\u548c\u5220\u5305\u60c5\u51b5\u3002\u5f53pernic\u4e3aTrue\u65f6\uff0c\u5219\u5217\u51fa\u6240\u6709\u7f51\u5361\u7684\u7edf\u8ba1\u4fe1\u606f\u3002\n\n\npsutil.net_connections([kind])\n\u4ee5\u5217\u8868\u7684\u5f62\u5f0f\u8fd4\u56de\u6bcf\u4e2a\u7f51\u7edc\u8fde\u63a5\u7684\u8be6\u7ec6\u4fe1\u606f(namedtuple)\u3002\u547d\u540d\u5143\u7ec4\u5305\u542bfd, family, type, laddr, raddr, status, pid\u7b49\u4fe1\u606f\u3002kind\u8868\u793a\u8fc7\u6ee4\u7684\u8fde\u63a5\u7c7b\u578b\uff0c\u652f\u6301\u7684\u503c\u5982\u4e0b\uff1a(\u9ed8\u8ba4\u4e3ainet)\n\n\npsutil.net_if_addrs()\n\u4ee5\u5b57\u5178\u7684\u5f62\u5f0f\u8fd4\u56de\u7f51\u5361\u7684\u914d\u7f6e\u4fe1\u606f\uff0c\u5305\u62ecIP\u5730\u5740\u548cmac\u5730\u5740\u3001\u5b50\u7f51\u63a9\u7801\u548c\u5e7f\u64ad\u5730\u5740\u3002\n\n\npsutil.net_if_stats()\n\u8fd4\u56de\u7f51\u5361\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u5305\u62ec\u662f\u5426\u542f\u52a8\u3001\u901a\u4fe1\u7c7b\u578b\u3001\u4f20\u8f93\u901f\u5ea6\u4e0emtu\u3002\n\n\npsutil.users()\n\u4ee5\u547d\u540d\u5143\u7ec4\u7684\u65b9\u5f0f\u8fd4\u56de\u5f53\u524d\u767b\u9646\u7528\u6237\u7684\u4fe1\u606f\uff0c\u5305\u62ec\u7528\u6237\u540d\uff0c\u767b\u9646\u65f6\u95f4\uff0c\u7ec8\u7aef\uff0c\u4e0e\u4e3b\u673a\u4fe1\u606f\n\n\npsutil.boot_time()\n\u4ee5\u65f6\u95f4\u6233\u7684\u5f62\u5f0f\u8fd4\u56de\u7cfb\u7edf\u7684\u542f\u52a8\u65f6\u95f4\n\n\n\n\u793a\u4f8b\n# \u67e5\u770b\u7f51\u5361\u4fe1\u606f\u7edf\u8ba1\n&gt;&gt;&gt; psutil.net_io_counters()\nsnetio(bytes_sent=9699431, bytes_recv=1895536, packets_sent=8606, packets_recv=27354, errin=0, errout=0, dropin=0, dropout=0)\n# \u67e5\u770b\u7f51\u5361\u914d\u7f6e\u4fe1\u606f\n&gt;&gt;&gt; psutil.net_if_addrs()\n{&#39;lo&#39;: [snicaddr(family=&lt;AddressFamily.AF_INET: 2&gt;, address=&#39;127.0.0.1&#39;, netmask=&#39;255.0.0.0&#39;, broadcast=None, ptp=None), snicaddr(family=&lt;AddressFamily.AF_INET6: 10&gt;, address=&#39;::1&#39;, netmask=&#39;ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff&#39;, broadcast=None, ptp=None), snicaddr(family=&lt;AddressFamily.AF_PACKET: 17&gt;, address=&#39;00:00:00:00:00:00&#39;, netmask=None, broadcast=None, ptp=None)], &#39;eth0&#39;: [snicaddr(family=&lt;AddressFamily.AF_INET: 2&gt;, address=&#39;172.16.5.12&#39;, netmask=&#39;255.255.255.0&#39;, broadcast=&#39;172.16.5.255&#39;, ptp=None), snicaddr(family=&lt;AddressFamily.AF_INET6: 10&gt;, address=&#39;fe80::9700:20da:ed33:9f50%eth0&#39;, netmask=&#39;ffff:ffff:ffff:ffff::&#39;, broadcast=None, ptp=None), snicaddr(family=&lt;AddressFamily.AF_PACKET: 17&gt;, address=&#39;52:54:00:3d:ea:06&#39;, netmask=None, broadcast=&#39;ff:ff:ff:ff:ff:ff&#39;, ptp=None)]}\n&gt;&gt;&gt; a = psutil.net_if_addrs()\n&gt;&gt;&gt; a[&#39;eth0&#39;]\n[snicaddr(family=&lt;AddressFamily.AF_INET: 2&gt;, address=&#39;172.16.5.12&#39;, netmask=&#39;255.255.255.0&#39;, broadcast=&#39;172.16.5.255&#39;, ptp=None), snicaddr(family=&lt;AddressFamily.AF_INET6: 10&gt;, address=&#39;fe80::9700:20da:ed33:9f50%eth0&#39;, netmask=&#39;ffff:ffff:ffff:ffff::&#39;, broadcast=None, ptp=None), snicaddr(family=&lt;AddressFamily.AF_PACKET: 17&gt;, address=&#39;52:54:00:3d:ea:06&#39;, netmask=None, broadcast=&#39;ff:ff:ff:ff:ff:ff&#39;, ptp=None)]\n&gt;&gt;&gt; a[&#39;eth0&#39;][0]\nsnicaddr(family=&lt;AddressFamily.AF_INET: 2&gt;, address=&#39;172.16.5.12&#39;, netmask=&#39;255.255.255.0&#39;, broadcast=&#39;172.16.5.255&#39;, ptp=None)\n&gt;&gt;&gt; a[&#39;eth0&#39;][0][1]\n&#39;172.16.5.12&#39;\n# \u67e5\u770b\u5f53\u524d\u767b\u5f55\u7528\u6237\u4fe1\u606f\n&gt;&gt;&gt; psutil.users()\n[suser(name=&#39;root&#39;, terminal=&#39;pts/0&#39;, host=&#39;172.16.2.66&#39;, started=1574151552.0, pid=1437), suser(name=&#39;root&#39;, terminal=&#39;pts/1&#39;, host=&#39;172.16.2.66&#39;, started=1574161536.0, pid=1699)]\n&gt;&gt;&gt;\n\n\u8fdb\u7a0b\u7ba1\u7406\n\n\n\u51fd\u6570\n\u63cf\u8ff0\n\n\n\n\npsutil.pids()\n\u4ee5\u5217\u8868\u7684\u5f62\u5f0f\u8fd4\u56de\u5f53\u524d\u6b63\u5728\u8fd0\u884c\u7684\u8fdb\u7a0b\n\n\npsutil.pid_exists(1)\n\u5224\u65ad\u7ed9\u70b9\u5b9a\u7684pid\u662f\u5426\u5b58\u5728\n\n\npsutil.process_iter()\n\u8fed\u4ee3\u5f53\u524d\u6b63\u5728\u8fd0\u884c\u7684\u8fdb\u7a0b\uff0c\u8fd4\u56de\u7684\u662f\u6bcf\u4e2a\u8fdb\u7a0b\u7684Process\u5bf9\u8c61\n\n\npsutil.Process()\n\u5bf9\u8fdb\u7a0b\u8fdb\u884c\u5c01\u88c5\uff0c\u53ef\u4ee5\u4f7f\u7528\u8be5\u7c7b\u7684\u65b9\u6cd5\u83b7\u53d6\u8fdb\u884c\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u6216\u8005\u7ed9\u8fdb\u7a0b\u53d1\u9001\u4fe1\u53f7\u3002\n\n\n\n\u8fdb\u7a0b\u76f8\u5173\u4fe1\u606f\u7684\u65b9\u6cd5\uff1a\n\nname\uff1a\u83b7\u53d6\u8fdb\u7a0b\u7684\u540d\u79f0\ncmdline\uff1a\u83b7\u53d6\u542f\u52a8\u8fdb\u7a0b\u7684\u547d\u4ee4\u884c\u53c2\u6570\ncreate_time\uff1a\u83b7\u53d6\u8fdb\u7a0b\u7684\u521b\u5efa\u65f6\u95f4(\u65f6\u95f4\u6233\u683c\u5f0f)\nnum_fds\uff1a\u8fdb\u7a0b\u6253\u5f00\u7684\u6587\u4ef6\u4e2a\u6570\nnum_threads\uff1a\u8fdb\u7a0b\u7684\u5b50\u8fdb\u7a0b\u4e2a\u6570\nis_running\uff1a\u5224\u65ad\u8fdb\u7a0b\u662f\u5426\u6b63\u5728\u8fd0\u884c\nsend_signal\uff1a\u7ed9\u8fdb\u7a0b\u53d1\u9001\u4fe1\u53f7\uff0c\u7c7b\u4f3c\u4e0eos.kill\u7b49\nkill\uff1a\u53d1\u9001SIGKILL\u4fe1\u53f7\u7ed3\u675f\u8fdb\u7a0b\nterminate\uff1a\u53d1\u9001SIGTEAM\u4fe1\u53f7\u7ed3\u675f\u8fdb\u7a0b\n\n\n\u793a\u4f8b\n# \u4ee5\u5217\u8868\u5f62\u5f0f\u67e5\u770b\u6b63\u5728\u8fd0\u884c\u7684\u8fdb\u7a0b\n&gt;&gt;&gt; psutil.pids()\n[1, 2, 3, 5, 7, 8, 9, 10, 11, 12, 13, 14, 16, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 32, 33, 34, 35, 43, 44, 45, 46, 47, 48, 61, 93, 99, 233, 234, 236, 237, 238, 242, 244, 245, 260, 266, 267, 268, 269, 270, 271, 272, 273, 274, 275, 276, 346, 374, 377, 378, 497, 498, 499, 500, 501, 502, 503, 506, 508, 509, 510, 511, 512, 513, 514, 515, 612, 616, 636, 638, 639, 640, 641, 643, 646, 647, 655, 658, 661, 677, 688, 689, 901, 902, 903, 912, 925, 949, 977, 981, 992, 994, 995, 997, 1001, 1002, 1003, 1004, 1255, 1536, 1840, 1842, 1844, 1861, 1862, 1863, 1864]\n# \u67e5\u770b\u8fdb\u7a0b\u8fd0\u884c\u72b6\u6001\uff0c\u4ee5\u5e03\u5c14\u5f62\u5f0f\u663e\u793a\n&gt;&gt;&gt; psutil.pid_exists(1)\nTrue\n# \u8fed\u4ee3\u5f53\u524d\u6b63\u5728\u8fd0\u884c\u8fdb\u7a0b\uff0c\u67e5\u770b\u5217\u8868\u4e2d\u524d\u4e09\u4e2a\u5b9e\u4f8b\u7684\u4fe1\u606f\n&gt;&gt;&gt; list(psutil.process_iter())[:3]\n[psutil.Process(pid=1, name=&#39;systemd&#39;, started=&#39;16:19:47&#39;), psutil.Process(pid=2, name=&#39;kthreadd&#39;, started=&#39;16:19:47&#39;), psutil.Process(pid=3, name=&#39;ksoftirqd/0&#39;, started=&#39;16:19:47&#39;)]\n&gt;&gt;&gt; \n# \u901a\u8fc7\u8fdb\u7a0b\u53f7\u5b9e\u4f8b\u5316\u5bf9\u8c61\n&gt;&gt;&gt; process = psutil.Process(1)\n&gt;&gt;&gt; print(process)\npsutil.Process(pid=1, name=&#39;systemd&#39;, started=&#39;16:19:47&#39;)\n# \u83b7\u53d6\u8fdb\u7a0b\u7684\u540d\u79f0\n&gt;&gt;&gt; process.name()\n&#39;systemd&#39;\n&gt;&gt;&gt; process.create_time()\n1574151587.05\n&gt;&gt;&gt; process.num_fds()\n47\n&gt;&gt;&gt; process.num_threads()\n1\n&gt;&gt;&gt;\n\n```\n", "categories": [{"name": "Python", "slug": "Python", "permalink": "https://blog.wooocloud.com/category/Python/"}], "tags": [{"name": "Python", "slug": "Python", "permalink": "https://blog.wooocloud.com/tag/Python/"}, {"name": "psutil", "slug": "psutil", "permalink": "https://blog.wooocloud.com/tag/psutil/"}]}, {"title": "CentOS7\u90e8\u7f72openvpn", "date": "2020-01-16T12:00:00-00.00", "path": "https://blog.wooocloud.com/archives/openvpn-in-centos7/", "text": "\u5b89\u88c5\u8f6f\u4ef6\u5305\n\nyum install -y epel-release\nyum install -y openvpn easy-rsa openssl openssl-devel lzo lzo-devel pam pam-devel automake pkgconfig\nserver\u7aef \u5236\u4f5c\u8bc1\u4e66\uff0c\u5bc6\u94a5\u7b49\u6587\u4ef6\n\n# \u590d\u5236\u670d\u52a1\u7aef\u914d\u7f6e\u6587\u4ef6\u81f3openvpn\u7684\u6839\u76ee\u5f55\ncp /usr/share/doc/openvpn-2.4.8/sample/sample-config-files/server.conf /etc/openvpn/\n\n# \u521b\u5efa\u5236\u4f5c\u8bc1\u4e66\u76ee\u5f55\nmkdir /etc/openvpn/easy-rsa\n\ncd /etc/openvpn/\n\n# \u590d\u5236\u5236\u4f5c\u8bc1\u4e66\u5de5\u5177\u81f3\u5236\u4f5c\u8bc1\u4e66\u76ee\u5f55\ncp -r /usr/share/easy-rsa/3.0.6/* /etc/openvpn/easy-rsa/\n\ncd easy-rsa/\n\n# \u521b\u5efa\u8bc1\u4e66\u914d\u7f6e\u4fe1\u606f\nvim vars\nset_var EASYRSA_REQ_COUNTRY     \"CN\"        # \u56fd\u5bb6\nset_var EASYRSA_REQ_PROVINCE    \"HB\"        # \u7701\u4efd\nset_var EASYRSA_REQ_CITY        \"Wuhan\"     # \u57ce\u5e02\nset_var EASYRSA_REQ_ORG         \"dragon\"    # \u7ec4\u7ec7\nset_var EASYRSA_REQ_EMAIL       \"xx@xx.com\" # \u90ae\u7bb1\nset_var EASYRSA_REQ_OU          \"dragon\"    # \u62e5\u6709\u8005\n\n# \u521d\u59cb\u5316pki\uff0c\u751f\u6210\u76ee\u5f55\u6587\u4ef6\u7ed3\u6784\n./easyrsa init-pki\ninit-pki complete; you may now create a CA or requests.\nyour newly created PKI dir is: /etc/openvpn/easy-rsa/pki\n\n# \u4f7f\u7528vars\u6587\u4ef6\u91cc\u9762\u914d\u7f6e\u7684\u4fe1\u606f\u521b\u5efaca\u8bc1\u4e66,\u4e2d\u95f4\u4f1a\u63d0\u793a\u8f93\u5165\u5bc6\u7801,\u8bb0\u4f4f\u6b64\u5bc6\u7801,\u540e\u671f\u9700\u8981\u4f7f\u7528\n./easyrsa build-ca\nNote: using Easy-RSA configuration from: ./vars # \u4f7f\u7528vars\u6587\u4ef6\u91cc\u9762\u914d\u7f6e\u7684\u4fe1\u606f\nGenerating a 2048 bit RSA private key\n\nwriting new private key to '/etc/openvpn/easy-rsa/pki/private/ca.key.Lg8IKADc4Q'\nEnter PEM pass phrase:# \u8bbe\u7f6eca\u5bc6\u7801\nVerifying - Enter PEM pass phrase:# \u91cd\u65b0\u8f93\u5165\u4e0a\u9762\u7684\u5bc6\u7801\n-----\nYou are about to be asked to enter information that will be incorporated\ninto your certificate request.\nWhat you are about to enter is what is called a Distinguished Name or a DN.\nThere are quite a few fields but you can leave some blank\nFor some fields there will be a default value,\nIf you enter '.', the field will be left blank.\n-----\nCommon Name (eg: your user, host, or server name) [Easy-RSA CA]:# \u76f4\u63a5\u56de\u8f66,\u5c31\u662f\u9ed8\u8ba4\u7684CA\u4f5c\u4e3a\u540d\u5b57,\u4e5f\u53ef\u81ea\u5b9a\u4e49,\u672c\u6b21\u4f7f\u7528opserver\nCA creation complete and you may now import and sign cert requests.\nYour new CA certificate file for publishing is at:\n/etc/openvpn/easy-rsa/pki/ca.crt\n\n# nopass\u8bbe\u7f6e\u514d\u8bc1\u4e66\u5bc6\u7801\uff0c\u5982\u679c\u8981\u8bbe\u7f6e\u5bc6\u7801\u53ef\u4ee5\u53d6\u6d88\u6b64\u53c2\u6570\u9009\u9879,\u8bbe\u7f6eCommonName\u7684\u65f6\u5019\u53ef\u4f7f\u7528\u9ed8\u8ba4\u7684server,\u4e5f\u53ef\u81ea\u5b9a\u4e49.\n./easyrsa gen-req opserver nopass\nNote: using Easy-RSA configuration from: ./vars                             #\u4f7f\u7528vars\u6587\u4ef6\u91cc\u9762\u914d\u7f6e\u7684\u4fe1\u606f\nGenerating a 2048 bit RSA private key\n\nwriting new private key to '/etc/openvpn/easy-rsa/pki/private/opserver.key.yuG9HRsSlU'\n-----\nYou are about to be asked to enter information that will be incorporated\ninto your certificate request.\nWhat you are about to enter is what is called a Distinguished Name or a DN.\nThere are quite a few fields but you can leave some blank\nFor some fields there will be a default value,\nIf you enter '.', the field will be left blank.\n-----\nCommon Name (eg: your user, host, or server name) [server]:# \u76f4\u63a5\u56de\u8f66,\u9ed8\u8ba4\u540d\u5b57\u4e3aserver,\u4e5f\u53ef\u81ea\u5b9a\u4e49,\u672c\u6b21\u4f7f\u7528opserver\nKeypair and certificate request completed. Your files are:\nreq: /etc/openvpn/easy-rsa/pki/reqs/opserver.req\nkey: /etc/openvpn/easy-rsa/pki/private/opserver.key\n\n# \u7b2c\u4e8c\u4e2aserver\u662f\u53ea\u4e0a\u9762\u670d\u52a1\u7aef\u8bc1\u4e66\u7684CommonName\u540d\u5b57\uff0c\u672c\u6b21\u4f7f\u7528opserver\n./easyrsa sign server opserver\nYou are about to sign the following certificate.\nPlease check over the details shown below for accuracy. Note that this request\nhas not been cryptographically verified. Please be sure it came from a trusted\nsource or that you have verified the request checksum with the sender.\n\nRequest subject, to be signed as a server certificate for 3650 days:\n\nsubject=\n    commonName                = opserver\n\nType the word 'yes' to continue, or any other input to abort.\n  Confirm request details: yes\nUsing configuration from ./openssl-1.0.cnf\nEnter pass phrase for /etc/openvpn/easy-rsa/pki/private/ca.key:            #\u8f93\u5165\u4e0a\u9762ca\u8bc1\u4e66\u751f\u6210\u65f6\u7684\u5bc6\u7801\nCheck that the request matches the signature\nSignature ok\nThe Subject's Distinguished Name is as follows\ncommonName            :PRINTABLE:'opserver'\nCertificate is to be certified until Jan 14 09:11:12 2029 GMT (3650 days)\nWrite out database with 1 new entries\nData Base Updated\nCertificate created at: /etc/openvpn/easy-rsa/pki/issued/opserver.crt          #\u670d\u52a1\u7aef\u8bc1\u4e66\u8def\u5f84\n\n# \u521b\u5efaDiffie-Hellman\uff0c\u65f6\u95f4\u6709\u70b9\u957f\n./easyrsa gen-dh\nNote: using Easy-RSA configuration from: ./vars\nGenerating DH parameters, 2048 bit long safe prime, generator 2\nThis is going to take a long time\n\nDH parameters of size 2048 created at /etc/openvpn/pki/dh.pem                 #dh\u8bc1\u4e66\u8def\u5f84\n\ncd /etc/openvpn\n\n# \u751f\u6210ta.key\nopenvpn --genkey --secret ta.key\n\u5ba2\u6237\u7aef\u8bc1\u4e66\n\n# \u4e3a\u4e86\u4fbf\u4e8e\u533a\u522b\uff0c\u6211\u4eec\u628a\u5ba2\u6237\u7aef\u4f7f\u7528\u7684\u8bc1\u4e66\u5b58\u653e\u5728\u65b0\u7684\u8def\u5f84\u3002/etc/openvpn/client,\u8bc1\u4e66\u5236\u4f5c\u6d41\u7a0b\u5982server\nmkdir -p /etc/openvpn/client\n\ncd /etc/openvpn/client\n\ncp -r /usr/share/easy-rsa/3.0.6/* /etc/openvpn/client\n\ncp /usr/share/doc/easy-rsa-3.0.6/vars.example ./vars\n\n./easyrsa init-pki\n\n./easyrsa gen-req opclient nopass\n\ncd /etc/openvpn/easy-rsa\n\n./easyrsa import-req /etc/openvpn/client/pki/reqs/opclient.req opclient\n\n./easyrsa sign client opclient\n\n# \u5c06\u5236\u4f5c\u597d\u7684server\u8bc1\u4e66\u653e\u5728openvpn\u7684\u6839\u76ee\u5f55,\u65b9\u4fbf\u914d\u7f6e\u6587\u4ef6\u8bfb\u53d6\ncp /etc/openvpn/easy-rsa/pki/ca.crt /etc/openvpn/\ncp /etc/openvpn/easy-rsa/pki/private/opserver.key /etc/openvpn/\ncp /etc/openvpn/easy-rsa/pki/issued/opserver.crt /etc/openvpn/\ncp /etc/openvpn/easy-rsa/pki/dh.pem /etc/openvpn/\n\ncd /etc/openvpn/\n\n# server\u914d\u7f6e\u6587\u4ef6\nvim server.conf\ncat /etc/openvpn/server.conf\nlocal 0.0.0.0\nport 1194\nproto tcp\ndev tun\nca ca.crt\ncert opserver.crt\nkey opserver.key\ndh dh.pem\nserver 10.8.0.0 255.255.255.0\nifconfig-pool-persist ipp.txt\npush \"redirect-gateway def1 bypass-dhcp\"\npush \"dhcp-option DNS 8.8.8.8\"\npush \"dhcp-option DNS 114.114.114.114\"\nkeepalive 10 120\ntls-auth ta.key 0\ncipher AES-256-CBC\ncomp-lzo\npersist-key\npersist-tun\nstatus openvpn-status.log\nverb 3\n\n# \u542f\u52a8openvpn-server\u5e76\u5f00\u673a\u542f\u52a8\nsystemctl -f enable openvpn@server.service\nsystemctl start openvpn@server.service\n\n# \u4e0b\u8f7d\u5ba2\u6237\u7aef\u8bc1\u4e66\u81f3\u672c\u5730\nsz /etc/openvpn/easy-rsa/pki/issued/client.crt\nsz /etc/openvpn/client/pki/private/client.key\nsz /etc/openvpn/easy-rsa/pki/ca.crt\nsz /etc/openvpn/ta.key\n\u5f00\u542fOpenVPN\u670d\u52a1\u5668\u7684\u7f51\u5361\u8f6c\u53d1\u529f\u80fd\n\necho \"net.ipv4.ip_forward = 1\" ######/etc/sysctl.conf\nsysctl -p\n\u6dfb\u52a0nat\u89c4\u5219\u5e76\u751f\u6548\n\niptables -t nat -A POSTROUTING -s 10.8.0.0/24 -o enp0s31f6 -j MASQUERADE\niptables-save\n\u5ba2\u6237\u7aef\u914d\u7f6e\u6587\u4ef6client.opvn\n\nclient\ndev tun   \nproto tcp\nremote server\u7aefIP 1194\nresolv-retry infinite\nnobind\npersist-key\npersist-tun\nremote-cert-tls server\nca ca.crt\ncert opclient.crt\nkey opclient.key\ntls-auth ta.key 1\ncipher AES-256-CBC\ncomp-lzo\nverb 3\n\u5c06\u4e0b\u8f7d\u5230\u672c\u5730\u7684\u5ba2\u6237\u7aef\u8bc1\u4e66\u548c\u5ba2\u6237\u7aef\u914d\u7f6e\u6587\u4ef6\u62f7\u8d1d\u81f3openvpn\u76ee\u5f55\u7684config\u76ee\u5f55\u4e2d\n\u542f\u52a8\n\u53c2\u8003: Centos7 \u5b89\u88c5openvpn by easy-rsa3.0 \u64cd\u4f5c\u6574\u7406\n", "categories": [{"name": "Linux", "slug": "Linux", "permalink": "https://blog.wooocloud.com/category/Linux/"}], "tags": [{"name": "Linux", "slug": "Linux", "permalink": "https://blog.wooocloud.com/tag/Linux/"}, {"name": "Openvpn", "slug": "Openvpn", "permalink": "https://blog.wooocloud.com/tag/Openvpn/"}]}, {"title": "vim\u81ea\u52a8\u5907\u4efd\u4fee\u6539\u4e4b\u524d\u7684\u6587\u4ef6", "date": "2020-01-16T12:00:00-00.00", "path": "https://blog.wooocloud.com/archives/vim-modify-save/", "text": "vim ~/.vimrc\n\nset backup\nfunction Bkdir()\n    let $BKODIR=expand(\"$HOME/.vim/backup\")\n    let $RUNTIMEPATH=expand(\"%:p:h\")\n    let $BKDIR=$BKODIR.$RUNTIMEPATH\n    if !isdirectory(expand(\"$BKDIR\"))\n        call mkdir(expand(\"$BKDIR\"),\"p\",0750)\n    endif\nendfunction\nau BufWrite * call Bkdir()\nautocmd BufWritePre * let &amp;bex = '_'.strftime(\"%Y%m%d_%H_%M_%S\")\nlet &amp;backupdir=expand(\"$HOME/.vim/backup\").expand(\"%:p:h\")\n", "categories": [{"name": "Linux", "slug": "Linux", "permalink": "https://blog.wooocloud.com/category/Linux/"}], "tags": [{"name": "Linux", "slug": "Linux", "permalink": "https://blog.wooocloud.com/tag/Linux/"}, {"name": "Vim", "slug": "Vim", "permalink": "https://blog.wooocloud.com/tag/Vim/"}]}, {"title": "First Blog", "date": "2020-01-16T09:00:00-00.00", "path": "https://blog.wooocloud.com/archives/first-blog/", "text": "\u8fd9\u662f\u7b2c\u4e00\u7bc7\u535a\u5ba2\n\u611f\u8c22Maverick &amp; Galileo\n\u611f\u8c22AlanDecode\n", "categories": [{"name": "Github", "slug": "Github", "permalink": "https://blog.wooocloud.com/category/Github/"}], "tags": [{"name": "Github", "slug": "Github", "permalink": "https://blog.wooocloud.com/tag/Github/"}, {"name": "Blog", "slug": "Blog", "permalink": "https://blog.wooocloud.com/tag/Blog/"}]}], "pages": [{"title": "\u53cb\u94fe", "date": "2020-01-16T09:00:00-00.00", "path": "https://blog.wooocloud.com/links/", "text": "\u5927\u54e5\u5927\u5ac2\u8fc7\u5e74\u597d!!!\n\u5c0f\u4f19\u4f34\u4eec\n\n                                  [\u5f85\u6dfb\u52a0]\u5927\u4f6c\u6355\u6349\u5668\n\n                                  [\u5f85\u6dfb\u52a0]", "categories": [], "tags": []}, {"title": "\u5173\u4e8e", "date": "2020-01-16T09:00:00-00.00", "path": "https://blog.wooocloud.com/about/", "text": "\u4ed6\u5f88\u61d2,\u4ec0\u4e48\u90fd\u6ca1\u6709\u7559\u4e0b...\n\u8054\u7cfb\u65b9\u5f0f\n\u90ae\u4ef6\uff1agotspinach#foxmail.com (\u8bf7\u4f7f\u7528 @ \u66ff\u6362 #)\n", "categories": [], "tags": []}]}